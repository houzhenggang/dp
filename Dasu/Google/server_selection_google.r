tcp<-c(31.00, 148.00, 999.99, 50.00, 149.00, 98.00, 120.00, 250.00, 222.00, 758.00, 886.00, 136.00, 55.00, 47.00, 855.00, 141.00, 184.00, 170.00, 10.00, 1.00, 6.00, 199.00, 96.00, 999.99, 999.99, 104.00, 89.00, 72.00, 92.00, 720.00, 36.00, 594.00, 13.00, 572.00, 999.99, 999.99, 792.00, 144.00, 110.00, 999.99, 0.00, 114.00, 312.00, 737.00, 250.00, 456.00, 165.00, 153.00, 654.00, 45.00, 156.00, 946.00, 32.00, 35.00, 86.00, 92.00, 207.00, 955.00, 271.00, 999.99, 257.00, 10.00, 999.99, 66.00, 525.00, 144.00, 109.00, 80.00, 74.00, 85.00, 333.00, 46.00, 1.00, 101.00, 52.00, 83.00, 52.00, 86.00, 629.00, 252.00, 36.00, 46.00, 82.00, 156.00, 296.00, 68.00, 168.00, 62.00, 71.00, 58.00, 89.00, 185.00, 139.00, 131.00, 263.00, 202.00, 132.00, 999.99, 92.00, 17.00, 119.00, 172.00, 52.00, 52.00, 120.00, 390.00, 285.00)

head<-c(36.00, 231.00, 693.00, 47.00, 205.00, 162.00, 117.00, 250.00, 196.00, 999.00, 898.00, 25.00, 56.00, 68.00, 851.00, 139.00, 224.00, 377.00, 42.00, 1.00, 3.00, 375.00, 95.00, 847.00, 645.00, 82.00, 96.00, 67.00, 109.00, 720.00, 49.00, 735.00, 17.00, 681.00, 940.00, 999.99, 999.99, 189.00, 97.00, 999.99, 999.99, 114.00, 333.00, 794.00, 246.00, 453.00, 319.00, 151.00, 867.00, 58.00, 222.00, 954.00, 30.00, 999.99, 87.00, 89.00, 207.00, 315.00, 242.00, 999.99, 450.00, 20.00, 999.99, 39.00, 226.00, 130.00, 114.00, 51.00, 79.00, 85.00, 227.00, 78.00, 2.00, 104.00, 84.00, 164.00, 79.00, 114.00, 999.99, 289.00, 58.00, 47.00, 148.00, 141.00, 271.00, 66.00, 165.00, 43.00, 52.00, 61.00, 102.00, 178.00, 178.00, 131.00, 999.99, 197.00, 152.00, 999.99, 88.00, 14.00, 114.00, 188.00, 73.00, 86.00, 101.00, 936.00, 406.00)

dwn<-c(25.00, 229.00, 221.00, 46.00, 132.00, 160.00, 114.00, 328.00, 184.00, 673.00, 720.00, 23.00, 55.00, 32.00, 694.00, 187.00, 184.00, 167.00, 30.00, 1.00, 2.00, 198.00, 88.00, 999.99, 645.00, 56.00, 86.00, 65.00, 102.00, 527.00, 27.00, 548.00, 11.00, 550.00, 940.00, 759.00, 792.00, 216.00, 69.00, 999.99, 999.99, 114.00, 265.00, 569.00, 201.00, 445.00, 231.00, 315.00, 467.00, 42.00, 219.00, 936.00, 30.00, 52.00, 79.00, 83.00, 207.00, 312.00, 164.00, 999.99, 279.00, 19.00, 999.99, 60.00, 226.00, 130.00, 107.00, 49.00, 117.00, 84.00, 194.00, 58.00, 1.00, 99.00, 82.00, 112.00, 117.00, 85.00, 468.00, 98.00, 50.00, 40.00, 76.00, 15.00, 177.00, 60.00, 165.00, 41.00, 51.00, 85.00, 69.00, 146.00, 104.00, 131.00, 260.00, 182.00, 185.00, 999.99, 88.00, 14.00, 112.00, 156.00, 59.00, 1.00, 71.00, 889.00, 217.00)

plot(ecdf(abs(dwn-head)), col = "grey", ylab="CDF", xlab="Download Time Difference (ms)", main="Google Server Selection Strategy Comparison", pch=16)
lines(ecdf(abs(head-tcp)), col = "black", pch=16)

legend("bottomright", col=c("grey", "black"), legend=c("Download time Vs HTTP Head Time", "HTTP Head Time Vs TCP Connection Setup Time"), pch=c(16, 16))




select distinct d2.client_ip, cast(d2.download_time as decimal(5,2)) as time from dasu d2,
(
select distinct d1.client_ip, min(cast(d1.first_bit_time as decimal(5,2))) as temptime from dasu d1
where d1.domain = 'lh3.googleusercontent.com'
and cast(d1.first_bit_time as decimal(5,2)) > 0.0
group by d1.client_ip
order by d1.client_ip
) as temp
where 
temp.client_ip = d2.client_ip
and temp.temptime = cast(d2.first_bit_time as decimal(5,2))
group by d2.client_ip
order by d2.client_ip